"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[592],{959:(T,C,l)=>{l.d(C,{t:()=>c});var s=l(8239),u=l(5736),i=l(2307),h=l(1454),d=l(755),g=l(3232),I=l(6733);const D=function(E){return{cursor:E}};let c=(()=>{class E extends u.V{set imgIcon(e){this._imgIcon!=e&&(this._imgIcon=e,this.loadSvg())}get imgIcon(){return this._imgIcon}constructor(e,o){super(e),this.injector=e,this.sanitizer=o,this.title="",this.textColor="#ddd",this.borderColor="#000",this.externalLink=!1,this._imgIcon=!1,this.go=e.get(i.o),this.server=e.get(h.N)}ngOnInit(){}loadSvg(){var e=this;return(0,s.Z)(function*(){e.seuCodigoSvg$=yield e.server.getSvg(e.imgIcon)})()}onClick(){this.route&&(this.externalLink?window.open(this.route.route.toString(),"_blank"):this.go.navigate(this.route,this.metadata))}static#e=this.\u0275fac=function(o){return new(o||E)(d.Y36(d.zs3),d.Y36(g.H7))};static#t=this.\u0275cmp=d.Xpm({type:E,selectors:[["app-button-dashboard"]],inputs:{title:"title",textColor:"textColor",borderColor:"borderColor",route:"route",metadata:"metadata",externalLink:"externalLink",imgIcon:"imgIcon"},features:[d.qOj],decls:6,vars:7,consts:[[1,"card","h-100",3,"ngStyle","click"],[1,"card-body","text-center","buttons-home"],[3,"innerHTML"],[1,"fs-5","fw-semibold","mt-3"]],template:function(o,t){if(1&o&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return t.onClick()}),d.TgZ(1,"div",1),d._UZ(2,"div",2),d.ALo(3,"async"),d.TgZ(4,"h2",3),d._uU(5),d.qZA()()()),2&o){let n;d.Q6J("ngStyle",d.VKq(5,D,t.route?"pointer":"inherit")),d.xp6(2),d.Q6J("innerHTML",t.sanitizer.bypassSecurityTrustHtml(null!==(n=d.lcZ(3,3,t.seuCodigoSvg$))&&void 0!==n?n:""),d.oJD),d.xp6(3),d.Oqu(t.title)}},dependencies:[I.PC,I.Ov],styles:[".card[_ngcontent-%COMP%]:hover{box-shadow:inset 5px -8px 9px #a5a5a554}"]})}return E})()},3417:(T,C,l)=>{l.d(C,{S:()=>D});var s=l(755),u=l(2133),i=l(645),h=l(6733),d=l(8544);const g=["inputElement"];function I(c,E){if(1&c){const a=s.EpF();s.TgZ(0,"input",4,5),s.NdJ("change",function(o){s.CHM(a);const t=s.oxw();return s.KtG(t.onChange(o))}),s.qZA()}if(2&c){const a=s.oxw();s.ekj("is-invalid",a.isInvalid()),s.Q6J("formControl",a.workControl)("id",a.generatedId(a.controlName))("readonly",a.isDisabled),s.uIk("aria-describedby",a.controlName+"_button")("max",a.isDaysOrHours?void 0:a.maxValue)}}let D=(()=>{class c extends i.M{set unit(a){this._unit!=a&&(this._unit=a,this.maxValue="day"==this.unit?24:"week"==this.unit?120:480,this.valueToWork(),this.detectChanges())}get unit(){return this._unit}set control(a){this._control=a}get control(){return this.getControl()}set size(a){this.setSize(a)}get size(){return this.getSize()}constructor(a){super(a),this.injector=a,this.class="form-group",this.change=new s.vpe,this.hostClass="",this.labelPosition="top",this.controlName=null,this.icon="",this.label="",this.labelInfo="",this.bold=!1,this.value=0,this.loading=!1,this.workControl=new u.NI,this.maxValue=24,this._unit="day"}ngAfterViewInit(){super.ngAfterViewInit(),this.control&&(this.control.valueChanges.subscribe(a=>this.valueToWork()),this.valueToWork())}onButtonClick(a){const e=this.isDaysOrHours?"day"==this.unit?"hour":"day":"day"==this.unit?"week":"week"==this.unit?"mouth":"day";console.log(this.unit,e),this.unit=e,this.unitChange&&this.unitChange(e)}get isDaysOrHours(){return null!=this.daysOrHours}get iconWork(){return"hour"==this.unit?"bi bi-clock":"day"==this.unit?"bi bi-calendar3-event":"week"==this.unit?"bi bi-calendar3-week":"bi bi-calendar3"}get unitWork(){return"hour"==this.unit?"horas":"day"==this.unit?this.isDaysOrHours?"dias":"h/dia":"week"==this.unit?"h/semana":"h/m\xeas"}onChange(a){this.workToValue(),this.change&&this.change.emit(a)}valueToWork(){const a=["hour","day"].includes(this.unit)?1:"week"==this.unit?5:20,e=this.control?this.control.value*a:this.value*a;this.workControl.value!=e&&this.workControl.setValue(e)}workToValue(){const a=["hour","day"].includes(this.unit)?1:"week"==this.unit?5:20,e=this.workControl.value/a;this.control?this.control.value!=e&&this.control.setValue(e):this.value!=e&&(this.value=e)}static#e=this.\u0275fac=function(e){return new(e||c)(s.Y36(s.zs3))};static#t=this.\u0275cmp=s.Xpm({type:c,selectors:[["input-workload"]],viewQuery:function(e,o){if(1&e&&s.Gf(g,5),2&e){let t;s.iGM(t=s.CRH())&&(o.inputElement=t.first)}},hostVars:2,hostBindings:function(e,o){2&e&&s.Tol(o.class)},inputs:{hostClass:"hostClass",labelPosition:"labelPosition",controlName:"controlName",disabled:"disabled",icon:"icon",label:"label",labelInfo:"labelInfo",labelClass:"labelClass",bold:"bold",value:"value",loading:"loading",form:"form",source:"source",path:"path",daysOrHours:"daysOrHours",maxLength:"maxLength",required:"required",unitChange:"unitChange",unit:"unit",control:"control",size:"size"},outputs:{change:"change"},features:[s._Bn([],[{provide:u.gN,useExisting:u.sg}]),s.qOj],decls:6,vars:18,consts:[[3,"labelPosition","labelClass","controlName","required","control","loading","disabled","label","labelInfo","icon","bold"],[1,"input-group"],["type","number","class","form-control","min","0",3,"formControl","id","is-invalid","readonly","change",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"id","click"],["type","number","min","0",1,"form-control",3,"formControl","id","readonly","change"],["inputElement",""]],template:function(e,o){1&e&&(s.TgZ(0,"input-container",0)(1,"div",1),s.YNc(2,I,2,7,"input",2),s.TgZ(3,"button",3),s.NdJ("click",function(n){return o.onButtonClick(n)}),s._UZ(4,"i"),s._uU(5),s.qZA()()()),2&e&&(s.Q6J("labelPosition",o.labelPosition)("labelClass",o.labelClass)("controlName",o.controlName)("required",o.required)("control",o.control)("loading",!1)("disabled",o.disabled)("label",o.label)("labelInfo",o.labelInfo)("icon",o.icon)("bold",o.bold),s.xp6(2),s.Q6J("ngIf",o.viewInit),s.xp6(1),s.ekj("disabled",o.isDisabled),s.Q6J("id",o.generatedId(o.controlName)+"_button"),s.xp6(1),s.Tol(o.iconWork),s.xp6(1),s.hij(" ",o.unitWork," "))},dependencies:[h.O5,u.Fj,u.wV,u.JJ,u.qQ,u.oH,d.h],styles:["input[type=number][_ngcontent-%COMP%]:read-only, input[type=number][_ngcontent-%COMP%]:disabled{background-color:#e9ecef}"]})}return c})()},5296:(T,C,l)=>{l.d(C,{H:()=>u});var s=l(4368);class u extends s.X{constructor(h){super(),this.nome="",this.initialization(h)}}},5007:(T,C,l)=>{l.d(C,{Z:()=>c});var s=l(8239),u=l(2559),i=l(755),h=l(8720),d=l(9193),g=l(8820),I=l(4495),D=l(7819);let c=(()=>{class E{set disabled(e){this._disabled!=e&&(this._disabled=e,this.loadExpediente())}get disabled(){return this._disabled}set control(e){var o=this;this._control!=e&&(this._control=e,this.expediente=this.control?.value,e?.valueChanges.subscribe(function(){var t=(0,s.Z)(function*(n){o.expediente=n});return function(n){return t.apply(this,arguments)}}()))}get control(){return this._control}set expediente(e){this._expediente!=e&&(this._expediente=e,this.loadExpediente())}get expediente(){return this._expediente}constructor(e,o,t){this.fh=e,this.cdRef=o,this.util=t,this.diasSemana=["domingo","segunda","terca","quarta","quinta","sexta","sabado"],this.validate=(n,r)=>{for(let f of this.diasSemana)if(r.startsWith(f)&&r.endsWith("_fim")&&n?.value?.length){let p=this.form?.controls[f+"_inicio"]?.value;if(!this.util.isTimeValid(p)||!this.util.isTimeValid(n.value)||this.util.getStrTimeHours(p)>this.util.getStrTimeHours(n.value))return"Inv\xe1lido"}return null},this.form=e.FormBuilder({domingo:{default:[]},segunda:{default:[]},terca:{default:[]},quarta:{default:[]},quinta:{default:[]},sexta:{default:[]},sabado:{default:[]},especial:{default:[]},domingo_inicio:{default:""},domingo_fim:{default:""},segunda_inicio:{default:""},segunda_fim:{default:""},terca_inicio:{default:""},terca_fim:{default:""},quarta_inicio:{default:""},quarta_fim:{default:""},quinta_inicio:{default:""},quinta_fim:{default:""},sexta_inicio:{default:""},sexta_fim:{default:""},sabado_inicio:{default:""},sabado_fim:{default:""},especial_inicio:{default:""},especial_fim:{default:""},especial_data:{default:null},especial_sem:{default:!1}},this.cdRef,this.validate)}ngOnInit(){}get isDisabled(){return null!=this._disabled}loadExpediente(){let e=(this.isDisabled?this.expedienteDisabled:this._expediente)||new u.z;const o=(t,n)=>t.map(r=>Object.assign({},{key:this.util.textHash(("especial"==n?this.util.getDateFormatted(r.data):"")+n+r.inicio+r.fim),value:("especial"==n?this.util.getDateFormatted(r.data)+" - ":"")+r.inicio+" at\xe9 "+r.fim,data:{inicio:r.inicio,fim:r.fim,data:r.data,sem:r.sem}}));this.isDisabled||(this._expediente=e),this.form.controls.domingo.setValue(o(e.domingo,"domingo")),this.form.controls.segunda.setValue(o(e.segunda,"segunda")),this.form.controls.terca.setValue(o(e.terca,"terca")),this.form.controls.quarta.setValue(o(e.quarta,"quarta")),this.form.controls.quinta.setValue(o(e.quinta,"quinta")),this.form.controls.sexta.setValue(o(e.sexta,"sexta")),this.form.controls.sabado.setValue(o(e.sabado,"sabado")),this.form.controls.especial.setValue(o(e.especial,"especial"))}saveExpediente(){this.isDisabled||(this._expediente=this._expediente||new u.z,this._expediente.domingo=this.form.controls.domingo.value.map(e=>e.data),this._expediente.segunda=this.form.controls.segunda.value.map(e=>e.data),this._expediente.terca=this.form.controls.terca.value.map(e=>e.data),this._expediente.quarta=this.form.controls.quarta.value.map(e=>e.data),this._expediente.quinta=this.form.controls.quinta.value.map(e=>e.data),this._expediente.sexta=this.form.controls.sexta.value.map(e=>e.data),this._expediente.sabado=this.form.controls.sabado.value.map(e=>e.data),this._expediente.especial=this.form.controls.especial.value.map(e=>e.data),this.control&&(this.control.setValue(this._expediente),this.cdRef.detectChanges()))}isEmpty(){return!1}addItemHandleDomingo(){return this.addItemHandle("domingo")}addItemHandleSegunda(){return this.addItemHandle("segunda")}addItemHandleTerca(){return this.addItemHandle("terca")}addItemHandleQuarta(){return this.addItemHandle("quarta")}addItemHandleQuinta(){return this.addItemHandle("quinta")}addItemHandleSexta(){return this.addItemHandle("sexta")}addItemHandleSabado(){return this.addItemHandle("sabado")}addItemHandleEspecial(){return this.addItemHandle("especial")}onChange(){this.saveExpediente()}addItemHandle(e){let o;const t=this.form.controls[e+"_inicio"].value,n=this.form.controls[e+"_fim"].value,r=this.form.controls.especial_data.value,v=this.form.controls.especial_sem.value,f=this.util.textHash(("especial"==e?this.util.getDateFormatted(r):"")+e+t+n),p=this.form.controls[e].value;return this.util.isTimeValid(t)&&this.util.isTimeValid(n)&&this.util.getStrTimeHours(t)<this.util.getStrTimeHours(n)&&("especial"!=e||r)&&this.util.validateLookupItem(this.form.controls[e].value,f)&&(o={key:f,value:("especial"==e?this.util.getDateFormatted(r)+" - ":"")+t+" at\xe9 "+n,data:{inicio:t,fim:n,data:r,sem:v}}),p.length>0&&p.forEach(b=>{const m=b.data.inicio,_=b.data.fim;(t>=m&&n<=m||t<=m&&n>=m||t>=m&&n<=m||t<=m&&n>=_||t>=m&&t<=_||n>=m&&n<=_||t==_||n==m)&&(console.log("Conflitante"),o=void 0)}),this.form.controls[e+"_inicio"].setValue(""),this.form.controls[e+"_fim"].setValue(""),"especial"==e&&(this.form.controls[e+"_data"].setValue(null),this.form.controls[e+"_sem"].setValue(!1)),o}static#e=this.\u0275fac=function(o){return new(o||E)(i.Y36(h.k),i.Y36(i.sBO),i.Y36(d.f))};static#t=this.\u0275cmp=i.Xpm({type:E,selectors:[["calendar-expediente"]],inputs:{expedienteDisabled:"expedienteDisabled",disabled:"disabled",control:"control",expediente:"expediente"},decls:28,vars:76,consts:[[1,"row"],["label","Domingo","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","domingo_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","domingo_fim",3,"size","control"],["label","Segunda","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","segunda_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","segunda_fim",3,"size","control"],["label","Ter\xe7a","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","terca_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","terca_fim",3,"size","control"],["label","Quarta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","quarta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","quarta_fim",3,"size","control"],["label","Quinta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","quinta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","quinta_fim",3,"size","control"],["label","Sexta","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","sexta_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","sexta_fim",3,"size","control"],["label","Sabado","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","sabado_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","sabado_fim",3,"size","control"],["label","Especial","hostClass","col-12 col-md-3",3,"disabled","control","size","addItemHandle","change"],["noIcon","","date","","label","Dia","controlName","especial_data",3,"size","control"],["label","Sem","controlName","especial_sem","labelInfo","Sem expediente. Se o hor\xe1rio ir\xe1 representar um per\xedodo que n\xe1o haver\xe1 expediente.",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","In\xedcio","hostClass","pe-0","controlName","especial_inicio",3,"size","control"],["noIcon","","noIndicator","","time","","time24hours","","label","Fim","hostClass","ps-0","controlName","especial_fim",3,"size","control"]],template:function(o,t){1&o&&(i.TgZ(0,"div",0)(1,"input-multiselect",1),i._UZ(2,"input-datetime",2)(3,"input-datetime",3),i.qZA(),i.TgZ(4,"input-multiselect",4),i._UZ(5,"input-datetime",5)(6,"input-datetime",6),i.qZA(),i.TgZ(7,"input-multiselect",7),i._UZ(8,"input-datetime",8)(9,"input-datetime",9),i.qZA(),i.TgZ(10,"input-multiselect",10),i._UZ(11,"input-datetime",11)(12,"input-datetime",12),i.qZA()(),i.TgZ(13,"div",0)(14,"input-multiselect",13),i._UZ(15,"input-datetime",14)(16,"input-datetime",15),i.qZA(),i.TgZ(17,"input-multiselect",16),i._UZ(18,"input-datetime",17)(19,"input-datetime",18),i.qZA(),i.TgZ(20,"input-multiselect",19),i._UZ(21,"input-datetime",20)(22,"input-datetime",21),i.qZA(),i.TgZ(23,"input-multiselect",22),i._UZ(24,"input-datetime",23)(25,"input-switch",24)(26,"input-datetime",25)(27,"input-datetime",26),i.qZA()()),2&o&&(i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.domingo)("size",3)("addItemHandle",t.addItemHandleDomingo.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.domingo_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.domingo_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.segunda)("size",3)("addItemHandle",t.addItemHandleSegunda.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.segunda_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.segunda_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.terca)("size",3)("addItemHandle",t.addItemHandleTerca.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.terca_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.terca_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.quarta)("size",3)("addItemHandle",t.addItemHandleQuarta.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.quarta_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.quarta_fim),i.xp6(2),i.Q6J("disabled",t.disabled)("control",t.form.controls.quinta)("size",3)("addItemHandle",t.addItemHandleQuinta.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.quinta_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.quinta_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.sexta)("size",3)("addItemHandle",t.addItemHandleSexta.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.sexta_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.sexta_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.sabado)("size",3)("addItemHandle",t.addItemHandleSabado.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.sabado_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.sabado_fim),i.xp6(1),i.Q6J("disabled",t.disabled)("control",t.form.controls.especial)("size",3)("addItemHandle",t.addItemHandleEspecial.bind(t))("change",t.onChange.bind(t)),i.xp6(1),i.Q6J("size",8)("control",t.form.controls.especial_data),i.xp6(1),i.Q6J("size",4)("control",t.form.controls.especial_sem),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.especial_inicio),i.xp6(1),i.Q6J("size",6)("control",t.form.controls.especial_fim))},dependencies:[g.a,I.k,D.p]})}return E})()},7918:(T,C,l)=>{l.d(C,{X:()=>D});var s=l(8239),u=l(9702),i=l(9193),h=l(5545),d=l(5908),g=l(6898),I=l(755);let D=(()=>{class c{constructor(a){this.injector=a,this.lookup=this.injector.get(u.W),this.lex=this.injector.get(d.E),this.dialog=this.injector.get(h.x),this.util=this.injector.get(i.f)}converterAtribuicoes(a){return a.map(e=>Object.assign({},{key:e,value:this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,e),icon:this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO,e),color:this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO,e)}))}haAlteracaoGestor(a,e,o,t){let n="",r=this.util.array_diff(e.atribuicoes,a).includes("GESTOR"),v=this.util.array_diff(a,e.atribuicoes).includes("GESTOR");if(!r&&!v)return["nenhuma",-1,"",!1];let f=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,"GESTOR")+" "+this.lex.translate("da Unidade")+" ";if(r)return n=t.toUpperCase()+" deixar\xe1 de ser "+f+e.unidade_sigla?.toUpperCase()+".",["perda",-1,n,!1];let p=e.atribuicoes.includes("LOTADO");n=t.toUpperCase()+" passar\xe1 a ser "+f+e.unidade_sigla?.toUpperCase();let b=o.find(_=>_.atribuicoes.includes("GESTOR")),m=o.findIndex((_,O,P)=>_.atribuicoes.includes("LOTADO"));return n=b?.id.length?n+" e deixar\xe1 de ser "+f+b.unidade_sigla+". ":n+". ",!p&&m>=0&&(n+="Por consequ\xeancia, sua lota\xe7\xe3o ser\xe1 alterada de "+o[m].unidade_sigla?.toUpperCase()+" para "+e.unidade_sigla?.toUpperCase()+"."),b?.id.length?["troca",o.findIndex(_=>_.id==b?.id),n,!0]:["ganho",-1,n,!p]}haAlteracaoGerencia(a,e,o,t){let n="",r=this.util.array_diff(e.atribuicoes,a).includes("GESTOR"),v=this.util.array_diff(a,e.atribuicoes).includes("GESTOR");if(!r&&!v)return["nenhuma",-1,"",!1];let f=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,"GESTOR")+" "+this.lex.translate("da Unidade")+" ";if(r)return n=e.usuario_nome?.toUpperCase()+" deixar\xe1 de ser "+f+t.toUpperCase()+".",["perda",-1,n,!1];let p=e.atribuicoes.includes("LOTADO");n=e.usuario_nome?.toUpperCase()+" passar\xe1 a ser "+f+t.toUpperCase();let b=o.find(_=>_.atribuicoes.includes("GESTOR"));n=(b?.id.length?n+" em substitui\xe7\xe3o a "+b.usuario_nome?.toUpperCase():n)+". ";let m=o.findIndex((_,O,P)=>_.atribuicoes.includes("LOTADO"));return!p&&m>=0&&(n+="Como \xe9 lotado em outra unidade, a lota\xe7\xe3o de "+e.usuario_nome?.toUpperCase()+" ser\xe1 alterada para "+this.lex.translate("a Unidade")+" - "+t.toUpperCase()+"."),b?.id.length?["troca",o.findIndex(_=>_.id==b?.id),n,!0]:["ganho",-1,n,!p]}haAlteracaoLotacao(a,e,o,t){let n=a.controls.atribuicoes.value.map(p=>p.key),r=o.findIndex((p,b,m)=>p.atribuicoes.includes("LOTADO"));if(!n.includes("LOTADO")||-1==r)return[!1,-1,"",""];let v=this.lex.translate("A lota\xe7\xe3o")+" de "+t.toUpperCase()+" passar\xe1 de "+o[r].unidade_sigla?.toUpperCase()+" para "+e.unidade_sigla?.toUpperCase()+".",f="N\xe3o \xe9 poss\xedvel alterar a lota\xe7\xe3o de "+t.toUpperCase()+" porque \xe9 Chefe da sua atual unidade de lota\xe7\xe3o - "+o[r].unidade_sigla?.toUpperCase()+".";return a.controls.unidade_id.value!=o[r].unidade_id?[!0,r,v,f]:[!1,-1,"",""]}inserirAtribuicao(a,e){let o=this.lookup.getLookup(this.lookup.UNIDADE_INTEGRANTE_TIPO,e);return o&&a.push(o),this.lookup.uniqueLookupItem(a)}ordenarIntegrantes(a){return a.sort((e,o)=>{let t=(e.usuario_nome||e.unidade_nome)?.toLowerCase(),n=(o.usuario_nome||o.unidade_nome)?.toLowerCase();return t<n?-1:t>n?1:0}),a.forEach(e=>{e.atribuicoes.sort()}),a}completarIntegrante(a,e,o,t){return Object.assign({},a,{unidade_id:e,usuario_id:o,atribuicoes:t})}ehPermitidoApagar(a){var e=this;let t=!["LOTADO"].includes(a),n="LOTADO"==a?"A lota\xe7\xe3o do servidor n\xe3o pode ser apagada. Para alter\xe1-la, lote-o em outra Unidade.":"";return(0,s.Z)(function*(){t||(yield e.dialog.alert("N\xc3O PERMITIDO!",n))})(),t}substituirItem(a,e,o){let t=a.itens.findIndex(v=>v.id==a.id),n=o instanceof g.b;return a.itens[t]=this.completarIntegrante(n?{id:a.id,unidade_sigla:a.apelidoOuSigla,unidade_nome:a.nome,unidade_codigo:a.codigo}:{id:a.id,usuario_apelido:a.apelidoOuSigla,usuario_nome:a.nome},n?a.id:o.id,n?o.id:a.id,e),a.itens}static#e=this.\u0275fac=function(e){return new(e||c)(I.LFG(I.zs3))};static#t=this.\u0275prov=I.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},4554:(T,C,l)=>{l.d(C,{o:()=>i});var s=l(755),u=l(2333);let i=(()=>{class h{constructor(g){this.auth=g,this.programa=[]}programaVigente(g){return!g||g.data_fim>=new Date}static#e=this.\u0275fac=function(I){return new(I||h)(s.LFG(u.e))};static#t=this.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);